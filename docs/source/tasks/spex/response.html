response
<head>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="/Users/krogager/coding/jkrogager.github.io/pynot/assets/css/main.css"/>
</head>

<header class="main">
  <h1>PyNOT : response</h1>
</header>

<p>
  <h3>Loading the data</h3>

  The task <code>pynot response</code> will launch an interactive graphical interface allowing you to filter, smooth and fit
  the response function of your instrument. To do this you need the following: <br>

  <ol>
    <li>
      A processed spectrum of a spectroscopic standard star observed under similar conditions as your science target,
      and using the same dispersive element. The spectrum should be bias-level corrected, flat-field corrected,
      wavelength calibrated and extracted to a 1-dimensional spectrum.
    </li>
    
    <li>
      A table of the well-calibrated flux or magnitudes as a function of wavelength.
      The list of installed reference stars is given at <a href="#starlist">the bottom of this page</a>.
    </li>
    
    <li>
      The airmass and exposure time of the reference star observation. This should ideally be available in the FITS file header.
    </li>
  </ol>

  To get started, run the task with or without a filename from the command line. You can also load a spectrum from the
  graphical interface itself. The window will look like Fig. 1.
  The programme will automatically try to guess which star you have observed based on the 
  meta data in the header &ndash; so please try to use consistent naming for the header's "OBJECT" keyword.
  If the star's name is not automatically identified, you can select it in the drop-down menu in the top right corner.

  <figure>
    <img width="80%" src="../../images/response1.png" alt=""/>
    <figcaption>
      Fig. 1 &ndash; An example of the graphical extraction interface of <code>pynot response</code>. The wavelength-calibrated,
      1-dimensional spectrum of the star BD262606 is shown in black. The blue dots mark the calculated obesrved flux in the same
      wavelength bins as the available measurements of absolute flux of the standard star.
    </figcaption>
  </figure>
</p>


<p>
  <h3>Fitting the response</h3>

  It's important to pay attention to absorption or emission features in the spectrum as these depend on the spectral resolution
  and therefore do not represent the exact flux in the given wavelength band. These should masked out. This can be done by clicking
  on a given blue point. It will then turn into a red cross, indicating that it will no longer be used when fitting the response function.
  Clicking on that point again will toggle it back on. (This part of the interface is sometimes a bit lagging, I apologize.)
  <br><br>

  When you have filtered out all the bad points, you can fit the response function by clicking the <i>"Fit Response"</i> button.
  This is done using a combination of spline fitting of a variable degree and a smoothed and clipped interpolation.
  For the best result, the smoothing parameter should be of the order of the uncertainty on the measured points.
  <br>
  The best fit response function will show up as a solid blue line, as seen in Fig. 2.

  <b>Saving the output:</b><br>
  When you are happy with the fitted response curve, you can save it to a file by clicking the <i>"Done"</i> button in the upper left
  corner. This will save the response function to a FITS table by default, which can be used in the PyNOT tasks <a href="flux1d.html">flux1d</a>
  and <a href="flux2d.html">flux2d</a> to apply the flux calibration to a processed science spectrum.
</p>


<p>
  <h3 id="starlist">List of standard stars</h3>

  The currently available list of standard stars is given here:

<ul>
  <li></li>
  <li>bd174708.dat</li>
  <li>bd262606.dat</li>
  <li>bd332642.dat</li>
  <li>bd75325.dat</li>
  <li>eg21.dat</li>
  <li>feige110.dat</li>
  <li>feige34.dat</li>
  <li>gd153.dat</li>
  <li>gd50.dat</li>
  <li>gd71.dat</li>
  <li>hd19445.dat</li>
  <li>hd84937.dat</li>
  <li>hd93521.dat</li>
  <li>he3.dat</li>
  <li>hiltner600.dat</li>
  <li>ltt3864.dat</li>
  <li>wolf1346.dat</li>
</ul>

  For more information, you can also look at the page from the 
  <a href="http://catserver.ing.iac.es/landscape/index.php" target="_blank">Isaac Newton Group of Telescopes</a>.
</p>